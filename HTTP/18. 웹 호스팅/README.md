

<img src="http://image.yes24.com/goods/15381085/XL" alt="HTTP 완벽 가이드" style="zoom:67%;" />

---

## 웹 호스팅

#### 1. 가상 호스팅

1. **호스트 정보가 없는 가상 서버 요청**
   - HTTP/1.0 요청은 요청 메시지에 URL의 경로 컴포넌트만 전송한다
     - 이는 서버가 여러개의 사이트를 가상 호스팅 하고 있다면, 사용자가 어떤 웹 사이트로 접근하려고 하는 것인지 아는데 필요한 정보가 충분하지 않다는 뜻이 됨
2. **가상 호스팅 동작하게 하기**
   - HTTP를 처음 설계할 때는 가상 호스팅을 고려하지 않고, URL에 있는 호스트 명 정보는 필요 없는 것이라 생각했다
   - 이에 호스팅을 지원하는 새로운 방법을 고민했고, 아래와 같다
     - URL 경로를 활용한 가상 호스팅
     - 포트번호를 활용한 가상 호스팅
     - IP주소를 통한 가상 호스팅
     - HOST 헤더를 통한 가상 호스팅
     - URL 경로를 통한 가상 호스팅



3. **URL 경로를 통한 가상 호스팅**

   - 공용 서버에 있는 각 가상 사이트에 서로 다른 URL 경로를 할당해서 강제로 구분 할 수 있음
   - 서버에 요청이 도착하면 호스트 명 정보가 요청에 포함되어 있지는 않지만, 경로에 있는 정보를 통해서 다음과 같이 이해함
     - 'GET /joe/index.html'
     - 'GET /mary/index.html'
   - URL 기반 호스팅은 불필요한 접두어 등의 이유로 좋지 않은 방법이라 평가되며 사용하지 않음

4. **포트번호를 통한 가상 호스팅**

   - 경로 명을 변경하는 대신, 각 서버에 다른 포트번호를 주어 할당
   - 하지만 사용자는 보통 포트번호를 사용하지 않기를 원하기 때문에 잘 사용하지 않는 방법이다

5. **IP 주소를 통한 가상 호스팅**

   - 위 방법보다 좋은 접근방법으로, 각 가상 웹사이트에 유일한 IP 주소를 부여한다
     - 클라이언트가 웹사이트를 요청하면, 사이트 고유의 IP주소를 찾게 된다
     - IP를 가지고 있는 공용 웹 서버에 TCP 커넥션을 맺는다
     - 클라이언트는 HTTP 요청을 보내고, 서버에서 해당 사이트의 리소스를 받는다
   - 이 방법은 잘 동작하지만, IP 낭비가 생길 수 있다는 단점이 있다

6. **HOST 헤더를 통한 가상 호스팅**

   - HTTP/1.1 부터는 HOST 헤더를 사용한다

     `Host = 'Host' : "호스트 [":" 포트]`

   - Host 헤더에 포트가 기술되어 있지 않으면, 기본 포트 사용
   - URL에 IP 주소가 있으면, Host 헤더는 같은 주소를 포함해야함
   - 클라이언트가 특정 프락시 서버를 사용한다면, Host 헤더에 프락시 서버가 아닌 원 서버의 호스트 명과 포트 기술
   - HTTP/1.1 웹 서버는 Host 헤더 필드가 없는 HTTP/1.1 요청 메시지를 받으면 400 상태 코드로 응답
