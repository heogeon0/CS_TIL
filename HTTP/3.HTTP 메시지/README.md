이 글은 'HTTP 완벽가이드'라는 책을 읽으면서 제가 이해한 내용을 바탕으로 정리한 글입니다. 
혹시 이 글을 보게 되신다면 비판적인 시각으로 보시는 것을 추천 드립니다.

<img src="http://image.yes24.com/goods/15381085/XL" alt="HTTP 완벽 가이드" style="zoom:67%;" />

---



## HTTP 메시지

#### 학습내용

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능
- 응답 메시지가 반환하는 여러 상태 코드
- 여러 HTTP 헤더들은 무슨 일을 하는가



### 1. 메시지의 흐름

- HTTP 메시지는 HTTP 애플리케이션 간에 주고받은 데이터의 블록
- 데이터의 블록들은 메시지의 내용과 의미를 설명하는 텍스트 메타 정보로 시작. 그 다음에 선택적으로 데이터가 올 수 있음
- '인바운드', '아웃바운드', '업스트림', '다운스트림'은 메시지의 방향을 의미하는 용어

#### 1. 메시지는 원 서버 방향을 인바운드로 하여 송신

- HTTP는 인바운드와 아웃바운드라는 용어를 트랜잭션 방향을 표현하기 위해 사용
- 메시지가 워ㅗㄴ 서버로 향하는 것은 인바운드로 이동
- 모든 처리가 끝난 메시지가 에이전트로 돌아오는 것은 아웃바운드로 이동

#### 2.  다운스트림으로 흐르는 메시지

- 요청 메시지냐 응답 메시지냐 관계없이 모든 메시지는 다운스트림으로 흐름
  - 메시지의 발송자는 수신자의 업스트림이며, 수진자는 발송자의 다운스트림이다.

### 2. 메시지의 각 부분

- HTTP메시지는 단순한, 데이터의 구조화된 블록
- 메시지는 시작줄, 헤더 블록, 본문 이렇게 세 부분으로 이루어짐
- 시작줄은 이것이 어떤 메세지인지 서술
- 헤더 블록은 속성
- 본문은 데이터를 담고 있음

#### 1. 메시지 문법

```
<메서드> <요청 url> <버전>
<헤더>

<엔티티 본문>
```

1. 메서드
   - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작
2.  요청  URL
   - 요청 대상이 되는 리소스를  지칭하는 완전한 URL 혹은 URL의 경로 구성요소
3. 버전
   - 이 메시지에서 사용 중인 HTTP의 버전
4. 상태 코드
   - 요청 중에 무엇이 일어났는지 설명하는 세 자리 숫자
   - 각 코드의 첫번째 자릿수는 상태의 일반적 분류('성공', '에러')등을 나타냄
5. 사유 구절
   - 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구
   - 상태 코드 이후부터 줄바꿈 문자열까지 사유 구절
6. 헤더들
   - 이름, 콜론, 선택적 공백, 값이 순서대로 나타내는 0개 이상의 헤더들
   - 다양한 헤더가 존재
7. 엔티티 본문
   - 임의의 데이터 블록을 포함
   - 엔터티 본문이 없더라도 HTTP 헤더의 집합은 항상 빈 줄(CLRF)로 끝 나야함



#### 2. 시작줄

- 모든 HTTP 메시지는 시작줄로 시작
- 요청 메시지의 시작줄은 무엇을 해야하는 지 말해줌
- 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다

1. 요청줄

   - 요청 메시지는 서버에게 리소스에 대해 무언가를 핻달라고 부탁
   - 요청 메시지의 시작줄, 혹은 요청줄에는 서버에서 어떤 동작이 일어나야 하는지 설명해주는 메서드와 그 동작에 대한 대상을 지칭하는 요청 URL이 들어 있음
   - 또한 클라이언트가 어떤 HTTP버전으로 말하고 있는지 서버에게 알려주는 HTTP버전도 포함

2. 응답줄

   - 응답 메시지는 수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려 줌

3. 메서드

   - 요청의 시작줄은 메서드로 시작하며, 서버에게 무엇을 해야하는지 알려줌

   | 메서드  | 설명                                             | 메시지 본문 유무 |
   | ------- | ------------------------------------------------ | ---------------- |
   | GET     | 서버에서 어떤 문서를 가져옴                      | 없음             |
   | HEAD    | 서버에서 어떤 문서에 대해 헤더만 가져옴          | 없음             |
   | POST    | 서버가 처리해야 할 데이터를 보냄                 | 있음             |
   | PUT     | 서버에 요청 메시지의 본문을 저장                 | 있음             |
   | TRACE   | 메시지가 프락시를 거쳐 서버에 도달하는 과정 추적 | 없음             |
   | OPTIONS | 서버가 어떤 메서드를 수행할 수 있는지 확인       | 없음             |
   | DELETE  | 서버에서 문서 제거                               | 없음             |

   - 이 뿐만 아니라 확장성을 활용해 추가 구현할 수 있는데, 이런 추가 메서드를 확장메서드라고 부름

4. 상태 코드

   - 메서드가 서버에게 무엇을 해야하는지 말해주는 것 처럼, 상태 코드는 클라이언트에게 무엇이 일어났는지 말해줌

5. 사유 구절

   - 읍답 시작줄의 마지막 구성 요소. 상태 코드에 대한 글로 된 설명을 제공

6. 버전 번호

   - HTTP/X,Y 형식으로 요청과 응답 메시지 양쪽 모두 기술
   - 분수 단위가 아니기 때문에 숫자가 큰게 항상 높은 버전을 의미함
      - 2.22 > 2.3 

#### 3. 헤더

1. 일반헤더
2. 요청헤더
3. 응답헤더
4. Entity헤더
5. 확장헤더
   - 명세에 정의되지 안흔 새로운 헫더

- 각 HTTP 헤더는 간단한 문법을 지님
- 흔히 이름, 쉼표, 공백, 필드 값, crlf가 순서대로 온다



#### 4. 엔티티 본문

- 엔티티 본문은 HTTP메시지의 화물이라고 할 수 있다
- HTTP 메시지는 이미지, 비디오, HTML문서, 소프트웨어 애플리케이션, 신용카드 트랜잭션 등 여러 종류의 디지털 데이터를 실어 나를 수 있음



### 3. 메서드

#### 1. 메서드

1. GET
   - 가장 흔히 사용하는 메서드
   - 주로 서버에게 리소스를 달라고 요청하기 위해 쓰임
2. HEAD
   - HEAD 메서드는 정확히 GET처럼 행동하지만, 서버는 응답으로 헤더만을 돌려줌
   - 클라이언트가 리소스를 실제로 가져올 필요없이 헤더만을 조사할 수 있음
     - 리소스를 가져오지 않고 그에 대한 정보(타입과 같은)을 알아낼 수 있음
     - 응답의 상태 코드를 통해, 개체가 존재하는지 확인 가능
     - 헤더를 확인하여 리소스가 변경되었는지 검사
   - 서버 개발자들은 반드시 반환되는 헤더가 GET으로 얻는 것과 정확히 일치함을 보장해야함
3. PUT
   - GET 메서드가 서버로부터 문서를 읽어 들이는데 반해 PUT메서드는 서버에 문서를 씀
4. POST
   - POST메서드는 서버에 입력 데이터를 전송하기 위해 설계
   - HTML폼을 지원하기 위해 흔히 사용
5. TRACE
   - 클라이언트가 어떤 요청을 할 때, 그 요청은 방화벽, 프락시, 게이트웨이 등의 애플리케이션을 통과
   - 이들에게는 원래의 HTTP 요청을 수정할 수 있는 기회가 있는데, TRACE 메서드는 클라이언트에게 자신의 요청이 서버에 도달했을 때 어떻게 보이게 되는지 알려줌
   - 요청 전송의 마지막 단계에 있는 서버는 자신이 받은 요청 메시지를 본문에 넣어 TRACE 응답을 되돌려줌
   - TRACE는 다른 종류의 요청(GET,POST등) 들을 일괸되게 다룬다고 가정하는 문제가 있음
     - 따라서, 어떻게 TRACE 요청을 처리할 것인지에 대해서는 중간 애플리케이션이 결정을 내림
6.  OPTIONS
   - 웹 서버에게 여러가지 종류의 지원 범위에 대해 물어봄
7. DELETE
   - 서버에게 요청 URL로 지정한 리소스를 삭제할 것을 요청

### 4. 응답코드

### 5. 헤더

- 헤더와 메서드는 클라이언트와 서버가 무엇을 하는지 결정하기 위해 함께 사용

#### 1. 일반 헤더

- 어떤 헤더는 메시지에 대한 아주 기본적인 정보 제공

1. 일반 캐시 헤더
   - HTTP/1.0은 HTTP 애플리케이션에게 매번 원 선버로부터 객체를 가져오는 대신 로컬 복사본으로 캐시할 수 있도록 해주는 최초의 헤더를 도입
   | 헤더          | 설명                                                         |
   | ------------- | ------------------------------------------------------------ |
   | Cache-Control | 메시지와 함께 캐시 지시자를 전달하기 위해 사용               |
   | Pragma        | 메시지와 함께 지시자를 전달하는 또 다른 방법. 캐시에 국한되지 않음 |

2. 요청 헤더

   1. Accept 관련 헤더
      - 클라이언트는 Accept 관련 헤더들을 이용해 서버에게 자신의 선호와 능력을 알려줄 수 있음
      - 서버는 이 정보를 활용해 무엇을 보낼 것인가에 대해 더 똑똑한 결정을 내릴 수 있음
   2. 조건부 요청 헤더
      - 조건부 요청 헤더를 사용하면, 클라이언트는 서버에게 요청에 응답하기 전에 먼저 조건이 참인지 확인하게 하는 제약을 포함할 수 있음
   3. 요청 보안 헤더
      - HTTP는 자체적으로 요청을 위한 간단한 인증요구/응답체계를 갖고 있음
   4. 프락시 요청 헤더

#### 2. 응답 헤더







